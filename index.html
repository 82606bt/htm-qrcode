<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<script src="https://unpkg.com/html5-qrcode" type="text/javascript">

</script>

<div class="row">
    <div class="input-group col-md-4">
        <input class="form-control py-2 border-right-0 border" type="search" value="search" id="example-search-input">
        <span class="input-group-append">
            <button class="btn btn-outline-secondary border-left-0 border btn-show-scanner" type="button" onclick="Functionclick()">
                <img src="./qr-code-scan.png">
            </button>
          </span>
    </div>
</div>
<div id="reader" width="600px"  ></div>
<script>
    // function onScanSuccess(decodedText, decodedResult) {
    
    // window.confirm(`Code: ${decodedText}`, decodedResult);
    // }

    // let config = { 
   
   
    // fps: 10,
    // qrbox: {width: 250, height: 250},
    // rememberLastUsedCamera: false,
    // supportedScanTypes: [Html5QrcodeScanType.SCAN_TYPE_CAMERA]
    // };
  

    // let html5QrcodeScanner = new Html5QrcodeScanner(
    // "qr-reader", config, /* verbose= */ false);

    // html5QrcodeScanner.render(onScanSuccess);
    // Html5Qrcode.getCameras().then(devices => {
    //     if (devices && devices.length) {
    //         var cameraId = devices[0].id;
      
    //         const html5QrCode = new Html5Qrcode("qr-reader");
    //         const qrCodeSuccessCallback = (decodedText, decodedResult) => {
    //             alert(decodedText);
    //         };
    //         const config = {
    //             fps: 25,
    //             qrbox: {
    //             width: 250,
    //             height: 250
    //             }
    //         };
    //         html5QrCode.start({facingMode: "environment"}, config, qrCodeSuccessCallback);
    //     }
    // }).catch(err => {
    //     console.log(err)
    // });
    function onScanSuccess(decodedText, decodedResult) {
    // handle the scanned code as you like, for example:
    alert(`Code matched = ${decodedText}`, decodedResult);
    }

    // Square QR box with edge size = 70% of the smaller edge of the viewfinder.
    let qrboxFunction = function(viewfinderWidth, viewfinderHeight) {
    let minEdgePercentage = 0.7; // 70%
    let minEdgeSize = Math.min(viewfinderWidth, viewfinderHeight);
    let qrboxSize = Math.floor(minEdgeSize * minEdgePercentage);
    return {
        width: qrboxSize,
        height: qrboxSize
    };
    }

    let html5QrcodeScanner = new Html5QrcodeScanner(
    "reader",
    { fps: 10, qrbox: qrboxFunction },
    /* verbose= */ false);
    html5QrcodeScanner.render(onScanSuccess);

   
   
</script>

<script>
    function Functionclick(){
        var x = document.getElementById("qr-reader");
        if (x.style.display === "none" || x.style.display === "") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }
</script>
<style>
    .form-control:focus {
    outline: 0 !important;
    border-color: initial;
    box-shadow: none;
    }
    #qr-reader{
        display: none;
    }
    img{
        width: 40px;
        height: 40px;
    }
    
</style>