<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<script src="https://unpkg.com/html5-qrcode" type="text/javascript">

</script>

<div class="row">
    <div class="input-group col-md-4">
        <input class="form-control py-2 border-right-0 border" type="search" value="search" id="example-search-input">
        <span class="input-group-append">
            <button class="btn btn-outline-secondary border-left-0 border btn-show-scanner" type="button" onclick="Functionclick()">
                <img src="./qr-code-scan.png">
            </button>
          </span>
    </div>
</div>
<div id="reader" width="600px"></div>
<script>
    function Functionclick(){
        var x = document.getElementById("reader");
        if (x.style.display === "none" || x.style.display === "") {
            x.style.display = "block";
            const html5QrCode = new Html5Qrcode("reader");
            const qrCodeSuccessCallback = (decodedText, decodedResult) => {
                alert(decodedText);
            };
            let qrboxFunction = function(viewfinderWidth, viewfinderHeight) {
            let minEdgePercentage = 0.7;
            let minEdgeSize = Math.min(viewfinderWidth, viewfinderHeight);
            let qrboxSize = Math.floor(minEdgeSize * minEdgePercentage);
            return {
                width: qrboxSize,
                height: qrboxSize
            };
            }
            const config = { fps: 10, qrbox: qrboxFunction }

            html5QrCode.start({ facingMode: "environment" }, config, qrCodeSuccessCallback);
            html5QrCode.start({ facingMode: { exact: "environment"} }, config, qrCodeSuccessCallback);
        } else {
            x.style.display = "none";
            const html5QrCode = new Html5Qrcode("reader");
            html5QrCode.stop();
        }
    }
</script>
<style>
    .form-control:focus {
    outline: 0 !important;
    border-color: initial;
    box-shadow: none;
    }
    #qr-reader{
        display: none;
    }
    img{
        width: 40px;
        height: 40px;
    }
    
</style>